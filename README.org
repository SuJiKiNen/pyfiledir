* Build Status
  #+BEGIN_SRC python :exports results table
    import yaml
    import pandas as pd
    data = yaml.safe_load(open("./azure-pipelines.yml", 'r'))
    job_name = data["jobs"][0]["job"]
    data = data["jobs"][0]["strategy"]["matrix"]
    df = pd.DataFrame.from_dict(data)
    df.columns.name = "env"
    df = df.stack().unstack(0)
    df = df.reset_index()
    image_url_template = '[[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20{}#.svg]]'
    df["imageName"] = df["imageName"].str.split("-").str.get(0)
    df["env"] = df["env"].apply(lambda x: image_url_template.format(x))
    df = df[["imageName", "python.version", "env"]]
    s = df['imageName']
    s2 = s.copy()
    for k, v in s.items():
        if k > 0 and s[k] == s[k-1]:
            s2[k] = ""
    df['imageName'] = s2
    df.rename(columns={'env': 'Status', 'python.version': 'Python Version', 'imageName': 'Platform'}, inplace=True)
    results = df.values.tolist()
    results.insert(0, df.columns.to_list())
    results.insert(1, None)
    return results
  #+END_SRC

  #+RESULTS:
  | Platform | Python Version | Status                                                                                                                                                       |
  |----------+----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------|
  | ubuntu   |            3.5 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python35_Linux#.svg]]   |
  |          |            3.6 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python36_Linux#.svg]]   |
  |          |            3.7 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python37_Linux#.svg]]   |
  | macos    |            3.5 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python35_MacOS#.svg]]   |
  |          |            3.6 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python36_MacOS#.svg]]   |
  |          |            3.7 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python37_MacOS#.svg]]   |
  | windows  |            3.5 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python35_Windows#.svg]] |
  |          |            3.6 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python36_Windows#.svg]] |
  |          |            3.7 | [[https://dev.azure.com/sujikinen/pyfiledir/_build/latest?definitionId=2&branchName=master][https://dev.azure.com/sujikinen/pyfiledir/_apis/build/status/SuJiKiNen.pyfiledir?branchName=master&jobName=tests&configuration=tests%20Python37_Windows#.svg]] |


* Demo
  [[demo.svg]]

* Environment Variables
  #+BEGIN_SRC python :exports results table

    from pyfiledir.py_core import DEFAULT_PYFILEDIR_ENVS
    results = []
    header = ["Environment variable name", "Default value", "Explanation"]
    results.append(header)
    results.append(None)
    for key, val in DEFAULT_PYFILEDIR_ENVS.__members__.items():
        results.append([key, "={}=".format(val), val.docstring])
    return results
  #+END_SRC

  #+RESULTS:
  | Environment variable name        | Default value | Explanation                                |
  |----------------------------------+---------------+--------------------------------------------|
  | PYFILEDIR_CANDIDATE_SEP          | =\n=          | how pyfiledir join candidates              |
  | PYFILEDIR_WILDCARD               | =#=           | wildcard match charactor for dir or file   |
  | PYFILEDIR_ADD_TRAILING_SLASH     | =True=        | add trailing slash for directory candidate |
  | PYFILEDIR_KEEP_LEADING_DOT_SLASH | =True=        | keep leading ./ in path                    |
  | PYFILEDIR_COMPLETE_COMMON_PREFIX | =True=        | complete common prefix of candidates first |
  | PYFILEDIR_EXPAND_TIDLE           | =False=       | expand =~= to =/home/<user>=               |
  | PYFILEDIR_IGNORE_CASE            | =True=        | completion ignore case                     |
  | PYFILEDIR_USE_UNIHAN_DICT        | =True=        | use rich Unihan dict                       |
  | PYFILEDIR_USE_NATURAL_SORT       | =False=       | use natural sort, sorting filenames        |


  pyfiledir default following some behaviors from .inputrc, see equivalents below:

  #+BEGIN_SRC python :exports results table
    from pyfiledir.py_core import inputrc_to_pyfiledir_env_map
    results = []
    header = [
        "INPUTRC setting name",
        "PYFILEDIR environment variable name",
    ]
    results.append(header)
    results.append(None)
    for key, val in inputrc_to_pyfiledir_env_map.items():
        results.append([key, val])
    return results
  #+END_SRC

  #+RESULTS:
  | INPUTRC setting name   | PYFILEDIR environment variable name |
  |------------------------+-------------------------------------|
  | mark-directories       | PYFILEDIR_ADD_TRAILING_SLASH        |
  | completion-ignore-case | PYFILEDIR_IGNORE_CASE               |
  | expand-tilde           | PYFILEDIR_EXPAND_TIDLE              |

* Development Guide
** Create Demo
   =python helper/create_demo.py &=
** Profiling
   requirements: =python 3.7=
   #+BEGIN_SRC shell
     python -m cProfile -m pyfiledir [option] <arg>
   #+END_SRC
